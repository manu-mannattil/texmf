% NAME
%
%   fammath.sty - force Latin characters and Arabic numerals to use
%                 the same font as the rest of the document
%
% DESCRIPTION
%
%   fammath.sty is a LaTeX style file that forces all Latin characters
%   and Arabic numerals in math environments to use the same font as the
%   rest of the document.
%

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{fammath}[2021/09/20 v0.1]

% Prevent Beamer from overwriting fonts.
\@ifclassloaded{beamer}{\beamer@suppressreplacementstrue}

% Option to use default sans-serif fonts.
\newif\if@sans
\DeclareOption{sans}\@sanstrue
\ProcessOptions\relax
\def\@textrmsf{\textrm}
\if@sans
  \def\familydefault{\sfdefault}
  \def\@textrmsf{\textsf}
\fi

% Math symbol definitions stolen from Beamer's beamerbasefont.sty file:
% https://github.com/josephwright/beamer/blob/master/base/beamerbasefont.sty
\SetSymbolFont{operators}{normal}{\encodingdefault}{\familydefault}{\mddefault}{n}
\SetSymbolFont{operators}{bold}{\encodingdefault}{\familydefault}{\bfdefault}{n}

\DeclareSymbolFont{numbers}{\encodingdefault}{\familydefault}{\mddefault}{n}
\SetSymbolFont{numbers}{bold}{\encodingdefault}{\familydefault}{\bfdefault}{n}
\DeclareMathSymbol{0}\mathalpha{numbers}{"30}
\DeclareMathSymbol{1}\mathalpha{numbers}{"31}
\DeclareMathSymbol{2}\mathalpha{numbers}{"32}
\DeclareMathSymbol{3}\mathalpha{numbers}{"33}
\DeclareMathSymbol{4}\mathalpha{numbers}{"34}
\DeclareMathSymbol{5}\mathalpha{numbers}{"35}
\DeclareMathSymbol{6}\mathalpha{numbers}{"36}
\DeclareMathSymbol{7}\mathalpha{numbers}{"37}
\DeclareMathSymbol{8}\mathalpha{numbers}{"38}
\DeclareMathSymbol{9}\mathalpha{numbers}{"39}

\DeclareSymbolFont{pureletters}{\encodingdefault}{\familydefault}{\mddefault}{it}
\SetSymbolFont{pureletters}{bold}{\encodingdefault}{\familydefault}{\bfdefault}{it}
\DeclareMathSymbol{A}\mathalpha{pureletters}{"41}
\DeclareMathSymbol{B}\mathalpha{pureletters}{"42}
\DeclareMathSymbol{C}\mathalpha{pureletters}{"43}
\DeclareMathSymbol{D}\mathalpha{pureletters}{"44}
\DeclareMathSymbol{E}\mathalpha{pureletters}{"45}
\DeclareMathSymbol{F}\mathalpha{pureletters}{"46}
\DeclareMathSymbol{G}\mathalpha{pureletters}{"47}
\DeclareMathSymbol{H}\mathalpha{pureletters}{"48}
\DeclareMathSymbol{I}\mathalpha{pureletters}{"49}
\DeclareMathSymbol{J}\mathalpha{pureletters}{"4A}
\DeclareMathSymbol{K}\mathalpha{pureletters}{"4B}
\DeclareMathSymbol{L}\mathalpha{pureletters}{"4C}
\DeclareMathSymbol{M}\mathalpha{pureletters}{"4D}
\DeclareMathSymbol{N}\mathalpha{pureletters}{"4E}
\DeclareMathSymbol{O}\mathalpha{pureletters}{"4F}
\DeclareMathSymbol{P}\mathalpha{pureletters}{"50}
\DeclareMathSymbol{Q}\mathalpha{pureletters}{"51}
\DeclareMathSymbol{R}\mathalpha{pureletters}{"52}
\DeclareMathSymbol{S}\mathalpha{pureletters}{"53}
\DeclareMathSymbol{T}\mathalpha{pureletters}{"54}
\DeclareMathSymbol{U}\mathalpha{pureletters}{"55}
\DeclareMathSymbol{V}\mathalpha{pureletters}{"56}
\DeclareMathSymbol{W}\mathalpha{pureletters}{"57}
\DeclareMathSymbol{X}\mathalpha{pureletters}{"58}
\DeclareMathSymbol{Y}\mathalpha{pureletters}{"59}
\DeclareMathSymbol{Z}\mathalpha{pureletters}{"5A}
\DeclareMathSymbol{a}\mathalpha{pureletters}{"61}
\DeclareMathSymbol{b}\mathalpha{pureletters}{"62}
\DeclareMathSymbol{c}\mathalpha{pureletters}{"63}
\DeclareMathSymbol{d}\mathalpha{pureletters}{"64}
\DeclareMathSymbol{e}\mathalpha{pureletters}{"65}
\DeclareMathSymbol{f}\mathalpha{pureletters}{"66}
\DeclareMathSymbol{g}\mathalpha{pureletters}{"67}
\DeclareMathSymbol{h}\mathalpha{pureletters}{"68}
\DeclareMathSymbol{i}\mathalpha{pureletters}{"69}
\DeclareMathSymbol{j}\mathalpha{pureletters}{"6A}
\DeclareMathSymbol{k}\mathalpha{pureletters}{"6B}
\DeclareMathSymbol{l}\mathalpha{pureletters}{"6C}
\DeclareMathSymbol{m}\mathalpha{pureletters}{"6D}
\DeclareMathSymbol{n}\mathalpha{pureletters}{"6E}
\DeclareMathSymbol{o}\mathalpha{pureletters}{"6F}
\DeclareMathSymbol{p}\mathalpha{pureletters}{"70}
\DeclareMathSymbol{q}\mathalpha{pureletters}{"71}
\DeclareMathSymbol{r}\mathalpha{pureletters}{"72}
\DeclareMathSymbol{s}\mathalpha{pureletters}{"73}
\DeclareMathSymbol{t}\mathalpha{pureletters}{"74}
\DeclareMathSymbol{u}\mathalpha{pureletters}{"75}
\DeclareMathSymbol{v}\mathalpha{pureletters}{"76}
\DeclareMathSymbol{w}\mathalpha{pureletters}{"77}
\DeclareMathSymbol{x}\mathalpha{pureletters}{"78}
\DeclareMathSymbol{y}\mathalpha{pureletters}{"79}
\DeclareMathSymbol{z}\mathalpha{pureletters}{"7A}

% Redefine some math alphabets to use \familydefault, \bfdefault, and
% \mddefault instead of \rmdefault, b, and m.  Otherwise, they don't work with
% XeLaTeX properly.  For understanding commands like \DeclareMathAlphabet
% better, see Chapter 7 of Mittelbach et al.'s book.
\DeclareMathAlphabet{\mathbf}{\encodingdefault}{\familydefault}{\bfdefault}{n}
%
\DeclareMathAlphabet{\mathit}{\encodingdefault}{\familydefault}{\mddefault}{it}
\SetMathAlphabet{\mathit}{bold}{\encodingdefault}{\familydefault}{\bfdefault}{it}
%
\DeclareMathAlphabet{\mathsf}{\encodingdefault}{\sfdefault}{\mddefault}{n}
\SetMathAlphabet{\mathsf}{bold}{\encodingdefault}{\sfdefault}{\bfdefault}{n}
%
\DeclareMathAlphabet{\mathtt}{\encodingdefault}{\ttdefault}{\mddefault}{n}
\SetMathAlphabet{\mathtt}{bold}{\encodingdefault}{\ttdefault}{\bfdefault}{n}

\if@sans
  \DeclareMathAlphabet{\mathrm}{\encodingdefault}{\sfdefault}{\mddefault}{n}
  \SetMathAlphabet{\mathrm}{bold}{\encodingdefault}{\sfdefault}{\bfdefault}{n}
\fi

% True sans-serif accents: use \@textrmsf in math mode with italic text and
% text-based accents.  Also, insert an empty superscript ^{} to produce
% better kerning.
\def\sacute#1{\ensuremath\@textrmsf{\it\'#1}^{}}
\def\sbar#1{\ensuremath\@textrmsf{\it\=#1}^{}}
\def\sbreve#1{\ensuremath\@textrmsf{\it\u#1}^{}}
\def\scheck#1{\ensuremath\@textrmsf{\it\v#1}^{}}
\def\sddot#1{\ensuremath\@textrmsf{\it\"#1}^{}}
\def\sdot#1{\ensuremath\@textrmsf{\it\.#1}^{}}
\def\sgrave#1{\ensuremath\@textrmsf{\it\`#1}^{}}
\def\shat#1{\ensuremath\@textrmsf{\it\^#1}^{}}
\def\stilde#1{\ensuremath\@textrmsf{\it\~#1}^{}}

% Bold version.
\def\sbacute#1{\ensuremath\@textrmsf{\textbf{\textit{\'#1}}}^{}}
\def\sbbar#1{\ensuremath\@textrmsf{\textbf{\textit{\=#1}}}^{}}
\def\sbbreve#1{\ensuremath\@textrmsf{\textbf{\textit{\u#1}}}^{}}
\def\sbcheck#1{\ensuremath\@textrmsf{\textbf{\textit{\v#1}}}^{}}
\def\sbddot#1{\ensuremath\@textrmsf{\textbf{\textit{\"#1}}}^{}}
\def\sbdot#1{\ensuremath\@textrmsf{\textbf{\textit{\.#1}}}^{}}
\def\sbgrave#1{\ensuremath\@textrmsf{\textbf{\textit{\`#1}}}^{}}
\def\sbhat#1{\ensuremath\@textrmsf{\textbf{\textit{\^#1}}}^{}}
\def\sbtilde#1{\ensuremath\@textrmsf{\textbf{\textit{\~#1}}}^{}}

% Convenient aliases.
\def\supscr#1{\textsuperscript{#1}}
\def\subscr#1{\textsubscript{#1}}
\def\textsfit#1{\ensuremath\textsf{\it#1}}
\def\textrmit#1{\ensuremath\textrm{\it#1}}

\endinput

% vim: ft=tex fdm=marker et sts=2 sw=2 nospell cole=0
